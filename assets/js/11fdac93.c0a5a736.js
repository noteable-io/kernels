"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[635],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=u(n),m=a,g=p["".concat(s,".").concat(m)]||p[m]||d[m]||i;return n?r.createElement(g,o(o({ref:t},c),{},{components:n})):r.createElement(g,o({ref:t},c))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:a,o[1]=l;for(var u=2;u<i;u++)o[u]=n[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6689:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var r=n(7462),a=(n(7294),n(3905));const i={sidebar_position:2,title:"Project Structure"},o=void 0,l={unversionedId:"getting-started/structure",id:"getting-started/structure",title:"Project Structure",description:"Directories",source:"@site/docs/getting-started/structure.md",sourceDirName:"getting-started",slug:"/getting-started/structure",permalink:"/kernels/getting-started/structure",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"Project Structure"},sidebar:"tutorialSidebar",previous:{title:"Installation",permalink:"/kernels/getting-started/installation"},next:{title:"Build a Kernel",permalink:"/kernels/getting-started/building-an-image"}},s={},u=[{value:"Directories",id:"directories",level:3},{value:"GPU Variants",id:"gpu-variants",level:3},{value:"Checklist",id:"checklist",level:3}],c={toc:u},p="wrapper";function d(e){let{components:t,...n}=e;return(0,a.kt)(p,(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h3",{id:"directories"},"Directories"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'- /\n - /${language} # The language of the kernel (python, R, rust, etc)\n    - /${identifier} # Kernel "type" (base, base-gpu, databricks, spark, etc)\n        - /$(version) # If applicable, the version of the language being used\n - /docs # Docusaurus site (you\'re here!)\n')),(0,a.kt)("p",null,"For some of the existing kernels, this looks like"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"- /\n  - /R/base/4.3.0\n  - /python\n    - /base\n      - /3.9\n      - /3.10\n")),(0,a.kt)("p",null,"If we were to add a new language, such as Rust @ ",(0,a.kt)("inlineCode",{parentName:"p"},"1.70.0"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"- /\n  - rust/base/1.70.0 # Add a new rust/base directory, then seed the initial version\n")),(0,a.kt)("p",null,"To add an additional Python version, such as ",(0,a.kt)("inlineCode",{parentName:"p"},"3.11"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"- /\n  - /python\n    - /base\n      - /3.9\n      - /3.10\n      - /3.11 # We just add a new subdirectory\n")),(0,a.kt)("p",null,"Note, that when adding kernel directories, ",(0,a.kt)("inlineCode",{parentName:"p"},"/docker-bake.hcl")," will also need to be\nconfigured to build the new targets"),(0,a.kt)("h3",{id:"gpu-variants"},"GPU Variants"),(0,a.kt)("p",null,"For kernels that need GPU packages, a ",(0,a.kt)("inlineCode",{parentName:"p"},"-gpu")," sibling is created for each language\u2019s ",(0,a.kt)("strong",{parentName:"p"},"base")," image.\nAny further child kernels can inherit from this base image, and simply install any additional packages.\nThis allows us to share common system level packages for GPU enablement, while also reducing build times\nfor kernels that inherit from it"),(0,a.kt)("h3",{id:"checklist"},"Checklist"),(0,a.kt)("p",null,"To standardize the design of Noteable kernels, the following requirements must be met before the new kernel spec\ncan be approved:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"All images for a specific language must be built off of that language's base image"),(0,a.kt)("li",{parentName:"ul"},"Base images must be able to start and run their entrypoint"),(0,a.kt)("li",{parentName:"ul"},"The resulting image must run as the ",(0,a.kt)("inlineCode",{parentName:"li"},"noteable")," user (or ",(0,a.kt)("inlineCode",{parentName:"li"},"4004:4004"),")"),(0,a.kt)("li",{parentName:"ul"},"The home directory for the user must be ",(0,a.kt)("inlineCode",{parentName:"li"},"/srv/noteable")),(0,a.kt)("li",{parentName:"ul"},"The entrypoint must be located at ",(0,a.kt)("inlineCode",{parentName:"li"},"/usr/local/bin/run.sh"))))}d.isMDXComponent=!0}}]);